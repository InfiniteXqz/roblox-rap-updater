name: Update Roblox Limiteds (RAP)
on:
  schedule: [{ cron: "0 8 * * *" }] # nightly 08:00 UTC
  workflow_dispatch:
jobs:
  run:
    runs-on: ubuntu-latest
    env:
      UNIVERSE_ID: "8365588169"
      DATASTORE_NAME: RNG_MASTER
      ENTRY_KEY: ROBLOX_LIMITEDS
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: 20 }
      - run: npm i node-fetch@3
      - run: node -e "console.log('Has UNIVERSE_ID:',!!process.env.UNIVERSE_ID,'Has KEY:',!!process.env.ROBLOX_OPEN_CLOUD_KEY)"
  env:
    ROBLOX_OPEN_CLOUD_KEY: ${{ secrets.ROBLOX_OPEN_CLOUD_KEY }}
      - run: node update-roblox-limiteds.js
        env:
          ROBLOX_OPEN_CLOUD_KEY: ${{ secrets.ROBLOX_OPEN_CLOUD_KEY }}
